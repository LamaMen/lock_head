# Arduino
Для обработки обращений по протоколу i2c используется библиотека **Wire**. Она использует прерывания.

Изначально надо указать на каком порту слушать обращения и какой метод будет обрабатывать прерывания:
```c++
Wire.begin(0x8);
Wire.onReceive(receiveEvent);
```
Функция, которая обрабатывает прерывания, считывает переданный бит и выбирает какой открыть ящик:
```c++
void receiveEvent(int howMany) {
  while (Wire.available()) {
    int c = Wire.read();
    switch (c) {
      case 1:
        currentDoor = door_1;
        openDoor();
        break;
	  ...
```
Открытие происходит следующим методом:
1. Запоминается номер ячейки. Все доступные ячейки определены в начале программы
2. На выбранный пин подаётся напряжение. (функция прерывания заканчивается)
3. В главной функции программы происходит проверка, открыта ли какая-либо ячейка. Если открыта, то программа засыпает на 5 секунд и потом выключает пин, на который было подано напряжение.